@model IEnumerable<TheGioiLoa.Models.ViewModel.BlogViewModel>

@{
    var i = 1;
}
@foreach (var item in Model)
{
    <tr id="page_@item.BlogId">
        <td>@i</td>
        <td>
            <a href="@Url.Action("EditPage","Admin",new { pageId = item.BlogId})" class="text-dark">
                @Html.DisplayFor(modelItem => item.Title)
            </a>
        </td>
        <td>
            @if (item.Status == 1)
            {
                <span class="btn btn-xs btn-success btn-status">Đã đăng</span>
            }
            else
            {
                <span class="btn btn-xs btn-danger btn-status">Chưa đăng</span>
            }
        </td>
        <td>
            <a class="" href="~/@item.BlogId/@item.Url" data-toggle="tooltip" title="Xem">
                <i class="fas fa-eye text-info">
                </i>
            </a>
            <a class="ml-2" href="@Url.Action("EditPage", "Admin", new {pageId = item.BlogId })" data-toggle="tooltip" title="Sửa">
                <i class="fas fa-pencil-alt text-warning">
                </i>
            </a>
            <button type="button" class="ml-1 bg-transparent border-0 delete-page" data-id="@item.BlogId" data-name="@item.Title" data-toggle="tooltip" title="Xóa">
                <i class="fas fa-trash text-danger">
                </i>
            </button>
        </td>
    </tr>
    i++;
}


<script>
    $('[data-toggle="tooltip"]').tooltip();
    $(".delete-page").click(function () {
        var pageId = $(this).attr("data-id");
        var r = confirm("Bạn có muốn xóa trang '" + $(this).attr("data-name") + "' này không?");
        console.log("a");
        if (r == true) {
            $.ajax({
                method: "POST",
                url: "/Admin/DeletePage",
                data: { pageId: pageId },
                success: function (data) {
                    if (data.status == "success") {
                        toastr.success(data.message);
                        loadPageList();
                    }
                }
            })
        }
    });
</script>
